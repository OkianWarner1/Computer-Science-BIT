var salvattore=function(e,t,r){"use strict";var n={},a=[],i=[],l=[],o=function(e,t,r){e.dataset?e.dataset[t]=r:e.setAttribute("data-"+t,r)};return n.obtainGridSettings=function(t){var r=e.getComputedStyle(t,":before").getPropertyValue("content").slice(1,-1),n=r.match(/^\s*(\d+)(?:\s?\.(.+))?\s*$/),a=1,i=[];return n?(a=n[1],i=(i=n[2])?i.split("."):["column"]):(n=r.match(/^\s*\.(.+)\s+(\d+)\s*$/))&&(i=n[1],(a=n[2])&&(a=a.split("."))),{numberOfColumns:a,columnClasses:i}},n.addColumns=function(e,r){for(var a,i=n.obtainGridSettings(e),l=i.numberOfColumns,c=i.columnClasses,s=new Array(+l),u=t.createDocumentFragment(),d=l;0!=d--;)a="[data-columns] > *:nth-child("+l+"n-"+d+")",s.push(r.querySelectorAll(a));s.forEach((function(e){var r=t.createElement("div"),n=t.createDocumentFragment();r.className=c.join(" "),Array.prototype.forEach.call(e,(function(e){n.appendChild(e)})),r.appendChild(n),u.appendChild(r)})),e.appendChild(u),o(e,"columns",l)},n.removeColumns=function(r){var n=t.createRange();n.selectNodeContents(r);var a=Array.prototype.filter.call(n.extractContents().childNodes,(function(t){return t instanceof e.HTMLElement})),i=a.length,l=a[0].childNodes.length,c=new Array(l*i);Array.prototype.forEach.call(a,(function(e,t){Array.prototype.forEach.call(e.children,(function(e,r){c[r*i+t]=e}))}));var s=t.createElement("div");return o(s,"columns",0),c.filter((function(e){return!!e})).forEach((function(e){s.appendChild(e)})),s},n.recreateColumns=function(t){e.requestAnimationFrame((function(){n.addColumns(t,n.removeColumns(t));var e=new CustomEvent("columnsChange");t.dispatchEvent(e)}))},n.mediaQueryChange=function(e){e.matches&&Array.prototype.forEach.call(a,n.recreateColumns)},n.getCSSRules=function(e){var t;try{t=e.sheet.cssRules||e.sheet.rules}catch(e){return[]}return t||[]},n.getStylesheets=function(){var e=Array.prototype.slice.call(t.querySelectorAll("style"));return e.forEach((function(t,r){"text/css"!==t.type&&""!==t.type&&e.splice(r,1)})),Array.prototype.concat.call(e,Array.prototype.slice.call(t.querySelectorAll("link[rel='stylesheet']")))},n.mediaRuleHasColumnsSelector=function(e){var t,r;try{t=e.length}catch(e){t=0}for(;t--;)if((r=e[t]).selectorText&&r.selectorText.match(/\[data-columns\](.*)::?before$/))return!0;return!1},n.scanMediaQueries=function(){var t=[];if(e.matchMedia){n.getStylesheets().forEach((function(e){Array.prototype.forEach.call(n.getCSSRules(e),(function(e){try{e.media&&e.cssRules&&n.mediaRuleHasColumnsSelector(e.cssRules)&&t.push(e)}catch(e){}}))}));var r=i.filter((function(e){return-1===t.indexOf(e)}));l.filter((function(e){return-1!==r.indexOf(e.rule)})).forEach((function(e){e.mql.removeListener(n.mediaQueryChange)})),l=l.filter((function(e){return-1===r.indexOf(e.rule)})),t.filter((function(e){return-1==i.indexOf(e)})).forEach((function(t){var r=e.matchMedia(t.media.mediaText);r.addListener(n.mediaQueryChange),l.push({rule:t,mql:r})})),i.length=0,i=t}},n.rescanMediaQueries=function(){n.scanMediaQueries(),Array.prototype.forEach.call(a,n.recreateColumns)},n.nextElementColumnIndex=function(e,t){var r,n,a=e.children,i=a.length,l=0,o=0;for(n=0;n<i;n++)r=a[n].children.length+(t[n].children||t[n].childNodes).length,0===l&&(l=r),r<l&&(o=n,l=r);return o},n.createFragmentsList=function(e){for(var r=new Array(e),n=0;n!==e;)r[n]=t.createDocumentFragment(),n++;return r},n.appendElements=function(e,t){var r=e.children,a=r.length,i=n.createFragmentsList(a);Array.prototype.forEach.call(t,(function(t){var r=n.nextElementColumnIndex(e,i);i[r].appendChild(t)})),Array.prototype.forEach.call(r,(function(e,t){e.appendChild(i[t])}))},n.prependElements=function(e,r){var a=e.children,i=a.length,l=n.createFragmentsList(i),o=i-1;r.forEach((function(e){var t=l[o];t.insertBefore(e,t.firstChild),0===o?o=i-1:o--})),Array.prototype.forEach.call(a,(function(e,t){e.insertBefore(l[t],e.firstChild)}));for(var c=t.createDocumentFragment(),s=r.length%i;0!=s--;)c.appendChild(e.lastChild);e.insertBefore(c,e.firstChild)},n.registerGrid=function(r){if("none"!==e.getComputedStyle(r).display&&"true"!==r.getAttribute("data-inited")){r.setAttribute("data-inited","true");var i=t.createRange();i.selectNodeContents(r);var l=t.createElement("div");l.appendChild(i.extractContents()),o(l,"columns",0),n.addColumns(r,l),a.push(r)}},n.init=function(){var e=t.createElement("style");e.innerHTML="[data-columns]::before{display:block;visibility:hidden;position:absolute;font-size:1px;}",t.head.appendChild(e);var r=t.querySelectorAll("[data-columns]");Array.prototype.forEach.call(r,n.registerGrid),n.scanMediaQueries()},n.init(),{appendElements:n.appendElements,prependElements:n.prependElements,registerGrid:n.registerGrid,recreateColumns:n.recreateColumns,rescanMediaQueries:n.rescanMediaQueries,init:n.init,append_elements:n.appendElements,prepend_elements:n.prependElements,register_grid:n.registerGrid,recreate_columns:n.recreateColumns,rescan_media_queries:n.rescanMediaQueries}}(window,window.document);